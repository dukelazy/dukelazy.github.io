<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: git | 放羊的博客]]></title>
  <link href="http://dukelazy.github.io/tags/git/atom.xml" rel="self"/>
  <link href="http://dukelazy.github.io/"/>
  <updated>2018-10-16T21:18:26+08:00</updated>
  <id>http://dukelazy.github.io/</id>
  <author>
    <name><![CDATA[Duke Lazy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Git常用难记命令]]></title>
    <link href="http://dukelazy.github.io/2015/02/hard-to-remember-git-commonly-used-commands/"/>
    <updated>2015-02-28T14:19:34+08:00</updated>
    <id>http://dukelazy.github.io/2015/02/hard-to-remember-git-commonly-used-commands</id>
    <content type="html"><![CDATA[<p><blockquote><p>在日常使用git中经常会使用到一些非常有用的命令脚本，但是我的脑袋总是记不住，每次都要上网查询，故在这里做一个集锦。</p><footer><strong>@shepherdlazy,twitter</strong> <cite><a href='http://www.twitter.com/shepherdlazy'>www.twitter.com/shepherdlazy/&hellip;</a></cite></footer></blockquote></p>

<!--more-->


<ul>
<li><h4>创建一个空分支</h4>

<pre><code class="`` bash">  $ git checkout --orphan gh-pages
</code></pre></li>
<li><h4>删除远程分支</h4></li>
<li><h4>恢复版本库到上一个版本</h4></li>
<li><h4>重置本地文件</h4></li>
<li><h4>强制推送</h4></li>
<li><h4>创建、删除、签出分支</h4></li>
<li><h4>同步全部远程分支</h4></li>
<li><h4>克隆全部远程分支</h4></li>
<li><h4>拉取全部远程分支</h4></li>
<li><h4>以子目录形式引入外部项目</h4>

<pre><code class="`` bash">  $ git filter-branch
  $ git subtree
</code></pre>

<ul>
<li>http://www.tuicool.com/articles/veaEBr</li>
</ul>
</li>
<li><h4>拆分仓库</h4>

<ul>
<li>http://www.tuicool.com/articles/rYBVzmy</li>
<li>http://codego.net/153650/</li>
<li>http://codego.net/21462/</li>
</ul>
</li>
<li><h4>如何提交空目录</h4>

  为什么不能提交空目录呢？
<code>
$ find . ( -type d -empty ) -and ( -not -regex ./\.git.* ) -exec touch {}/.gitignore;
</code>

<ul>
<li>http://demo.netfoucs.com/younger_china/article/details/21653463</li>
</ul>
</li>
<li><h4>下一个</h4></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[转]解决在git的post-receive钩子不能执行git pull]]></title>
    <link href="http://dukelazy.github.io/2015/01/git-post-receive-git-pull/"/>
    <updated>2015-01-11T00:00:00+08:00</updated>
    <id>http://dukelazy.github.io/2015/01/git-post-receive-git-pull</id>
    <content type="html"><![CDATA[<p>有一个需求是本地git在push到远程 git repo 之后，在远程服务器上自动在/dir/foo下执行 git pull 的操作。想来是一个很简单的需求，不就是在远程的 foo.git 仓库中的 hook 里加一个 post-receive 的钩子，然后在钩子里加入一个 git pull 的操作。但是实际操作的时候发现有问题的，因为这样忽略了一个小细节的问题。</p>

<!--more-->


<p>操作之前，头脑里想的代码如下：</p>

<pre><code class="bash">#!/bin/sh
cd /var/git/web3/etc/puppet
/usr/bin/git pull
</code></pre>

<p>用这个代码在 git push ssh://git@ownlinux.org:/opt/foo.git 之后，发现远程服务器上的 /dir/foo 目录下并没有成功 pull 到最新的数据，并且终端上也有报错（remote: fatal: Not a git repository: ‘.’）。 后面发现 git 的钩子在运行的时候会调用 GIT_DIR 这个环境变量，而不是PWD 这个。所以在 git pull 的时候提示 Not a git repository: ‘.’ ，其中 “.” 正是 GIT_DIR 这个环境变量的值。</p>

<p>钩子的代码改成下面的之后，运行正常了：</p>

<pre><code class="sh">#!/bin/sh
unset $(git rev-parse --local-env-vars)
cd /var/git/web3/etc/puppet
/usr/bin/git pull
</code></pre>

<h2><em>参考资料</em></h2>

<ul>
<li><em><a href="http://www.ownlinux.org">OwnLinux.org</a>. <a href="http://www.ownlinux.org/2013/11/22/git-post-receive-git-pull.html">记 git 的 post-receive 钩子不能正常 git pull 的问题</a>. 2013-11-22 [205-01-11]</em></li>
</ul>

]]></content>
  </entry>
  
</feed>
